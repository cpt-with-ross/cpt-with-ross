<% if message.role == 'user' %>
  <div class="d-flex justify-content-end mb-4" id="<%= dom_id(message) %>">
    <div class="bg-light text-dark px-3 py-2 rounded-4" style="max-width: 80%; font-size: 0.95rem;">
      <%= message.content %>
    </div>
  </div>
<% elsif message.role == 'assistant' %>
  <div class="d-flex justify-content-start mb-4" id="<%= dom_id(message) %>">
    <div class="text-dark" style="max-width: 90%; font-size: 0.95rem; line-height: 1.6;" data-controller="markdown">
      <span id="message_<%= message.id %>_content" data-markdown-target="source" hidden><%= message.content %></span>
      <div data-markdown-target="output"></div>
    </div>
  </div>
<% end %>

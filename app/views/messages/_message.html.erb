<% if message.role == 'user' %>
  <div data-controller="text-to-speech" class="d-flex justify-content-end mb-4" id="<%= dom_id(message) %>">
    <div data-text-to-speech-target="loading" class="spinner-border spinner-border-sm ms-2" role="status">
      <span class="visually-hidden">Loading audio...</span>
    </div>
    <button data-text-to-speech-target="playPause" data-action="click->text-to-speech#speak" class="btn btn-sm btn-link d-none">
      ▶️
    </button>
    <div data-text-to-speech-target="text" class="bg-light text-dark px-3 py-2 rounded-4" style="max-width: 80%; font-size: 0.95rem;">
      <%= message.content %>
    </div>
  </div>
<% elsif message.role == 'assistant' %>
  <div class="d-flex justify-content-start mb-4" id="<%= dom_id(message) %>">
    <div class="text-dark" style="max-width: 90%; font-size: 0.95rem; line-height: 1.6;">
      <span id="message_<%= message.id %>_content"><%= message.content %></span>
    </div>
  </div>
<% end %>

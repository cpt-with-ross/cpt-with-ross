<%# Reusable inline form for Turbo Frame editing. frame_id must match the parent frame. %>
<%= turbo_frame_tag frame_id do %>
  <div class="p-2 mb-2 bg-light rounded border">
    <%= simple_form_for(model, url: url,
        html: { data: { controller: "form-with-context", action: "submit->form-with-context#submit" } }) do |f| %>

      <% (local_assigns[:hidden_fields] || {}).each do |field_name, field_value| %>
        <%= f.hidden_field field_name, value: field_value %>
      <% end %>

      <div class="mb-2">
        <%= f.input attribute_name,
            label: false,
            placeholder: local_assigns[:placeholder] || "Enter name...",
            autofocus: true,
            input_html: { class: "form-control form-control-sm", onfocus: "this.select()" } %>
      </div>

      <div class="d-flex justify-content-end gap-2 align-items-center">
        <% if model.new_record? %>
          <button type="button"
                  class="btn btn-sm btn-link text-muted text-decoration-none p-0"
                  onclick="document.getElementById(<%= frame_id.to_json %>).innerHTML=''">
            Cancel
          </button>
        <% end %>

        <%= f.button :submit, "Save", class: "btn btn-sm btn-dark" %>
      </div>

    <% end %>
  </div>
<% end %>

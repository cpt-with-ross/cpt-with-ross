<%= turbo_stream_from "chat_#{chat.id}" %>

<div class="d-flex flex-column h-100 border-start bg-white"
     data-controller="chat"
     data-chat-chat-id-value="<%= chat.id %>">

  <div class="chat-resize-handle"
       data-column-resize-target="resizeHandle"
       data-action="mousedown->column-resize#startResize"></div>

  <div class="px-3 border-bottom bg-light d-flex align-items-center justify-content-between" style="height: 65px;">
    <h5 class="fw-bold text-dark m-0">Chat with Ross</h5>
    <button type="button"
            class="btn btn-sm btn-light border"
            data-action="column-resize#toggle"
            title="Hide chat">
      <i class="fa-solid fa-angles-right"></i>
    </button>
  </div>

  <div class="flex-grow-1 overflow-y-auto p-4 bg-white"
       id="chat-messages"
       data-chat-target="messages">
    <%= render partial: "messages/message", collection: chat.messages.where.not(role: 'system'), as: :message %>
  </div>

  <div class="p-4 bg-white">
    <%= render partial: "shared/chat_form", locals: { chat: chat } %>
  </div>

</div>
